<?xml version="1.0" encoding="UTF-8"?>
<mxfile host="app.diagrams.net" modified="2025-09-17T00:00:00.000Z" agent="5.0 (ChatGPT)" etag="67890" version="20.5.3" type="device">
  <diagram id="d1" name="Huerto Frutícola - Modelo ER (Chen mejorado)">
    <mxGraphModel dx="1216" dy="768" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="850" pageHeight="1100">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Entidades -->
        <mxCell id="H" value="Huerto
(pk: id, nombre, ubicación)" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=#000000;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="200" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="A" value="Árbol
(pk: id, especie, fecha_plantación, fecha_muerte)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="V" value="Variedad
(pk: id, nombre_variedad, descripción)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="640" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="R" value="RegistroEvento
(pk: id, tipo_evento, fecha, observaciones)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="170" width="300" height="70" as="geometry"/>
        </mxCell>

        <!-- Entidad asociativa: Árbol-Variedad para injertos/múltiples variedades -->
        <mxCell id="AV" value="TieneVariedad
(pk: id, fecha_inicio, nota)" style="shape=roundrect;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="480" y="110" width="220" height="60" as="geometry"/>
        </mxCell>

        <!-- Relaciones (los rombos se muestran como pequeños nodos para claridad) -->
        <mxCell id="r1" value="compone_de
(1:N)" style="shape=rhombus;whiteSpace=wrap;html=1;perimeter=0;fillColor=#E8F6F3;" vertex="1" parent="1">
          <mxGeometry x="200" y="70" width="80" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="r2" value="registra
(1:N)" style="shape=rhombus;whiteSpace=wrap;html=1;perimeter=0;fillColor=#E8F6F3;" vertex="1" parent="1">
          <mxGeometry x="360" y="220" width="80" height="40" as="geometry"/>
        </mxCell>

        <mxCell id="r3" value="mantenimiento / variedades
(M:N via TieneVariedad)" style="shape=rhombus;whiteSpace=wrap;html=1;perimeter=0;visible=0;" vertex="1" parent="1">
          <mxGeometry x="560" y="80" width="60" height="40" as="geometry"/>
        </mxCell>

        <!-- Conexiones Huerto - Árbol -->
        <mxCell id="c1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;html=1;" edge="1" parent="1" source="H" target="r1">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="c2" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="r1" target="A">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Conexiones Árbol - Registro -->
        <mxCell id="c3" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="A" target="r2">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>
        <mxCell id="c4" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="r2" target="R">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Conexiones Árbol - TieneVariedad - Variedad -->
        <mxCell id="c5" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="A" target="AV"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c6" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="AV" target="V"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Notas de cardinalidad y consultas cubiertas (texto) -->
        <mxCell id="note1" value="Notas:
- Un Huerto 1..* Árbol.
- Un Árbol pertenece a 1 Huerto.
- Árbol y Variedad: M:N (tomas/injertos) modelado con TieneVariedad.
- Registro almacena eventos históricos (muerte, trasplante, poda) con fecha -> permite cálculo de muertes por año.
- Para consultas: contar variedades por huerto -> JOIN Huerto->Árbol->TieneVariedad->Variedad." style="text;html=1;align=left;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="260" width="820" height="120" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram id="d2" name="Carreteras - Modelo ER (Chen mejorado)">
    <mxGraphModel dx="1216" dy="768" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="C" value="Carretera
(pk: id, código, categoría, nombre)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="240" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="T" value="Tramo
(pk: id, número_tramo, km_inicio, km_fin, es_inicio, es_fin)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="340" y="40" width="260" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="M" value="Comuna
(pk: id, nombre, región)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <!-- Entidad asociativa para relacionar Tramo y Comuna con kms específicos -->
        <mxCell id="TC" value="TramoComuna
(pk: id, km_en_comuna_inicio, km_en_comuna_fin, orden_en_tramo)" style="shape=roundrect;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="560" y="120" width="300" height="70" as="geometry"/>
        </mxCell>

        <!-- Relación directa Carretera - Tramo -->
        <mxCell id="r_ct" value="compuesta_por
(1:N)" style="shape=rhombus;whiteSpace=wrap;html=1;perimeter=0;fillColor=#E8F6F3;" vertex="1" parent="1">
          <mxGeometry x="220" y="70" width="80" height="40" as="geometry"/>
        </mxCell>

        <!-- Conexiones -->
        <mxCell id="c21" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="C" target="r_ct"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c22" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="r_ct" target="T"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="c23" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="T" target="TC"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c24" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="M" target="TC"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Entidad para confluencias en extremos -->
        <mxCell id="Conf" value="Confluencia
(pk: id, tipo: físico|confluye, carretera_destino_id, km_destino, tramo_destino_id, comuna_destino_id)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8EDEB;" vertex="1" parent="1">
          <mxGeometry x="40" y="160" width="540" height="70" as="geometry"/>
        </mxCell>

        <!-- Notas -->
        <mxCell id="note2" value="Notas:
- Tramo pertenece a exactamente 1 Carretera.
- Tramo puede pasar por varias Comunas (orden y kms por TramoComuna).
- Si Tramo es inicio o fin y confluye, registrar en Confluencia con referencia a la carretera y tramo destino y km." style="text;html=1;align=left;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="250" width="940" height="120" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>

  <diagram id="d3" name="Servicio Militar - Modelo ER (Chen mejorado)">
    <mxGraphModel dx="1216" dy="768" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <mxCell id="S" value="Soldado
(pk: codigo_soldado, nombre, apellidos, graduación)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="40" width="300" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="CU" value="Cuartel
(pk: id_cuartel, nombre, ubicación)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="380" y="40" width="260" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="CO" value="Cuerpo
(pk: id_cuerpo, denominación)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="760" y="40" width="220" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="CMP" value="Compañía
(pk: id_compañia, número, actividad_principal)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="160" width="340" height="70" as="geometry"/>
        </mxCell>

        <mxCell id="SV" value="Servicio
(pk: id_servicio, código_servicio, descripción)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="440" y="160" width="300" height="70" as="geometry"/>
        </mxCell>

        <!-- Entidad asociativa: Compañía - Cuartel (una compañía puede estar en varios cuarteles) -->
        <mxCell id="CC" value="CompañíaEnCuartel
(pk: id, fecha_inicio, fecha_fin, rol_en_cuartel)" style="shape=roundrect;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="420" y="260" width="340" height="70" as="geometry"/>
        </mxCell>

        <!-- Entidad asociativa: Soldado - Servicio (registro de realización con fecha) -->
        <mxCell id="SS" value="Realiza
(pk: id, fecha_realizacion, observaciones)" style="shape=roundrect;whiteSpace=wrap;html=1;fillColor=#FFF2CC;" vertex="1" parent="1">
          <mxGeometry x="720" y="160" width="260" height="70" as="geometry"/>
        </mxCell>

        <!-- Relaciones y conexiones -->
        <mxCell id="c31" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="S" target="CO"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c32" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="S" target="CMP"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="c33" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="CMP" target="CC"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c34" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="CU" target="CC"><mxGeometry relative="1" as="geometry"/></mxCell>

        <mxCell id="c35" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="S" target="SS"><mxGeometry relative="1" as="geometry"/></mxCell>
        <mxCell id="c36" style="edgeStyle=orthogonalEdgeStyle;html=1;" edge="1" parent="1" source="SV" target="SS"><mxGeometry relative="1" as="geometry"/></mxCell>

        <!-- Notas de reglas de negocio -->
        <mxCell id="note3" value="Reglas de diseño (resumidas):
- Soldado pertenece a 1 Cuerpo y 1 Compañía (durante servicio).
- Una Compañía puede tener soldados de distintos Cuerpos.
- Una Compañía puede estar ubicada en varios Cuarteles (CompañíaEnCuartel).
- Un Soldado está destinado en 1 Cuartel (atributo o relación directa si se desea).
- Los servicios realizados se registran en Realiza con fecha: permite consultas por fechas y recuentos." style="text;html=1;align=left;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="360" width="940" height="120" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
